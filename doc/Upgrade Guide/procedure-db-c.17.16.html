<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Customizing the Upgrade</title>
    <link rel="StyleSheet" href="css/procedure-db-c.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <!-- THE FOLLOWING IS A GUIDEWIRE STYLE DEFINITION FOR THE LINK TO THIS FEATURE -->
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <!-- THE FOLLOWING IS A GUIDEWIRE GSCRIPT FUNCTION FOR THE LINK TO THIS FEATURE -->
    <script type="text/javascript">
function guidewire_selectall()
{
var text_val=eval("document.linktothisurlform.urlfield");
text_val.focus();
text_val.select();
}
</script>
  </head>
  <body onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <!-- THE FOLLOWING IS A GUIDEWIRE DIV FOR THE 'LINK TO THIS' FEATURE -->
    <div id="linkToThisPage" class="popup" style="display: none;">
      <div class="popupTitle">Link Directly to This Page 
           <a href="#" onclick="var thePopup = getElementById('linkToThisPage');thePopup.style.display='none';return false;"><img class="popupClosebox" src="wwhelp/wwhimpl/common/images/close.gif" /></a></div>
      <div style="padding:6px;">
        <div class="popupText" id="linkToThisPageBookmark">An error has occurred if you see this messsage.</div>
        <form name="linktothisurlform" method="post" action="" style="width:275px;margin:0px">
          <input type="text" class="popupURLText" id="linkToThisPageURL" name="urlfield" rows="1" cols="55" onClick="guidewire_selectall();" onFocus="guidewire_selectall();"></input>
        </form>
      </div>
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <span>PolicyCenter Upgrade Guide</span> : 
    <span class="WebWorks_Breadcrumbs" style="text-align: left;"><a class="WebWorks_Breadcrumb_Link" href="part-basicupgrade_2.html#2022289">Upgrading from 4.0.x</a> : <a class="WebWorks_Breadcrumb_Link" href="procedure-db-c.17.01.html#2022289">Upgrading the PolicyCenter 4.0.x Database</a> : Customizing the Upgrade</span></div>
    <hr align="left" />
    <blockquote>
      <h3 class="H1_-_Heading_1"><a name="2022289">Customizing the Upgrade</a></h3>
      <div class="B_-_Body"><a name="2022290">The </a><span class="cv_-_computer_voice">IDatamodelUpgrade</span> plugin interface provides hooks for custom code that you want to run during the database upgrade. You can use the <span class="cv_-_computer_voice">IDatamodelUpgrade</span> plugin to:</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2022291">execute custom version checks to test data or the data model itself before starting the upgrade.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2022292">make custom database changes before or after the database upgrade.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2022293">make data model changes to archived entities.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2022294">For example, you might fix a consistency check failure issue, correct issues reported by version checks, or delete a custom extension that you are no longer using.</a></div>
      <div class="NI_-_Note_Important">
        <span class="n_-_note">IMPORTANT   </span><a name="2022298">PolicyCenter </a>4.0 included a similar plugin interface, <span class="cv_-_computer_voice">IDatabaseUpgrade</span>. If you previously implemented <span class="cv_-_computer_voice">IDatabaseUpgrade</span> for an upgrade to PolicyCenter 4.0, you must now implement <span class="cv_-_computer_voice">IDatamodelUpgrade</span> if you want to execute custom upgrade code.</div>
      <h4 class="H2_-_Heading_2"><a name="2022303">Running Custom Version Checks and Triggers</a></h4>
      <div class="B_-_Body"><a name="2022304">You can use the </a><span class="cv_-_computer_voice">IDatamodelUpgrade</span> plugin to run custom version checks and triggers before and after the database upgrade. The <span class="cv_-_computer_voice">IDatamodelUpgrade</span> plugin interface contains method signatures for two methods that you must define in your plugin. These signatures are:</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt; margin-bottom: 2.0pt; vertical-align: baseline">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap; color: #000000; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner" style="color: #000000; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none"><span class="cv_-_computer_voice"><a name="2022305">property getBeforeUpgradeDatamodelChanges() : List&lt;IDataModelChange&lt;BeforeUpgradeVersionTrigger&gt;&gt;</a></span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt; margin-bottom: 2.0pt; vertical-align: baseline">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap; color: #000000; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner" style="color: #000000; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none"><span class="cv_-_computer_voice"><a name="2022306">property getAfterUpgradeDatamodelChanges() : List&lt;IDataModelChange&lt;AfterUpgradeVersionTrigger&gt;&gt;</a></span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2022308">Each method returns a list of </a><span class="cv_-_computer_voice">IDataModelChange</span> entities, each taking a <span class="cv_-_computer_voice">BeforeUpgradeVersionTrigger</span> or <span class="cv_-_computer_voice">AfterUpgradeVersionTrigger</span> type parameter. The <span class="cv_-_computer_voice">IDataModelChange</span> interface has two methods that you use to make data model changes. The <span class="cv_-_computer_voice">getDatabaseUpgradeVersionTrigger</span> method is for changes to the database. The <span class="cv_-_computer_voice">getArchivedDocumentUpgradeVersionTrigger</span> method is for changes to archived entities. If your organization has not implemented archiving or you do not want to make changes to archived entities, return null for <span class="cv_-_computer_voice">getArchivedDocumentUpgradeVersionTrigger</span>.</div>
      <div class="B_-_Body"><a name="2022309">The </a><span class="cv_-_computer_voice">getAfterUpgradeDatamodelChanges</span> method runs after the Guidewire upgrade version triggers. You can use this method to move data into extension tables or columns that did not exist prior to upgrading.</div>
      <div class="B_-_Body"><a name="2022310">You can return an empty list from either </a><span class="cv_-_computer_voice">getBeforeUpgradeDatamodelChanges</span> or <span class="cv_-_computer_voice">getAfterUpgradeDatamodelChanges</span>. For example, if you only have triggers to run before the upgrade, you can return an empty list from <span class="cv_-_computer_voice">getAfterUpgradeDatamodelChanges</span>.</div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="2022311">Modifying Tables</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2022312">Both </a><span class="cv_-_computer_voice">BeforeUpgradeVersionTrigger</span> and <span class="cv_-_computer_voice">AfterUpgradeVersionTrigger</span> base classes provide a protected <span class="cv_-_computer_voice">getTable</span> method that accepts a <span class="cv_-_computer_voice">string</span> parameter. The <span class="cv_-_computer_voice">getTable</span> method returns an <span class="cv_-_computer_voice">IBeforeUpgradeTable</span> or <span class="cv_-_computer_voice">IAfterUpgradeTable</span> object that provides a number of methods for DDL and DML operations, such as:</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="2022313">create</a></span> – Create the table if it does not already exist. The table must be related to an entity defined in the data model. This method is available only for <span class="cv_-_computer_voice">IBeforeUpgradeTable</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="2022314">delete</a></span> - Deletes rows from a table. Returns a builder (<span class="cv_-_computer_voice">IBeforeUpgradeDeleteBuilder</span> for <span class="cv_-_computer_voice">IBeforeUpgradeTable</span>, <span class="cv_-_computer_voice">IDeleteBuilder</span> for <span class="cv_-_computer_voice">IAfterUpgradeTable)</span> that has methods for comparing data to restrict which rows are deleted.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="2022315">drop</a></span> - Drops the table.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="2022316">dropColumns</a></span> - Drops multiple columns from the table.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="2022317">getColumn</a></span> – Returns an <span class="cv_-_computer_voice">IBeforeUpgradeColumn</span> or <span class="cv_-_computer_voice">IAfterUpgradeColumn</span> object that has methods to perform DDL operations on the column such as create, drop, rename, and more.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="2022318">insert</a></span> – Returns a builder (<span class="cv_-_computer_voice">IBeforeUpgradeInsertBuilder</span> for <span class="cv_-_computer_voice">IBeforeUpgradeTable</span>, <span class="cv_-_computer_voice">IInsertBuilder</span> for <span class="cv_-_computer_voice">IAfterUpgradeTable)</span> to perform an insert operation.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="2022319">insertSelect</a></span> – Returns a builder (<span class="cv_-_computer_voice">IBeforeUpgradeInsertSelectBuilder</span> for <span class="cv_-_computer_voice">IBeforeUpgradeTable</span>, <span class="cv_-_computer_voice">IInsertSelectBuilder</span> for <span class="cv_-_computer_voice">IAfterUpgradeTable)</span> for SQL to perform an insert operation using data selected from a table.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="2022320">rename</a></span> - Renames the table.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="2022321">update</a></span> – Returns a builder (<span class="cv_-_computer_voice">IBeforeUpgradeUpdateBuilder</span> for <span class="cv_-_computer_voice">IBeforeUpgradeTable</span>, <span class="cv_-_computer_voice">IUpdateBuilder</span> for <span class="cv_-_computer_voice">IAfterUpgradeTable)</span> for SQL to perform an update operation.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2022322">For DML operations, call the </a><span class="cv_-_computer_voice">execute</span> method on the builder to actually perform the operation. The <span class="cv_-_computer_voice">execute</span> method runs in its own transaction. You do not need to handle transactions and <span class="cv_-_computer_voice">TransactionManager</span>.</div>
      <div class="B_-_Body"><a name="2022323">There are more methods on the </a><span class="cv_-_computer_voice">IBeforeUpgradeTable</span> and <span class="cv_-_computer_voice">IAfterUpgradeTable</span> classes documented in the Guidewire Gosu API documentation. To generate the Guidewire Gosu API documentation, run the <span class="cv_-_computer_voice">gwpc regen-gosudoc</span> command from the PolicyCenter <span class="cv_-_computer_voice">bin</span> directory. Then, open <span class="cv_-_computer_voice">PolicyCenter/build/gosudoc/index.html</span>.</div>
      <div class="B_-_Body"><a name="2022333">The methods for </a><span class="cv_-_computer_voice">BeforeUpgradeVersionTrigger</span> intentionally take strings but not entities or properties. This is because the name of the column could change in the future. Consider <span class="cv_-_computer_voice">PropertyA</span> on <span class="cv_-_computer_voice">EntityE</span> which corresponds to column <span class="cv_-_computer_voice">A</span> in the database. Suppose you use <span class="cv_-_computer_voice">PROPERTYA_PROP</span> in a version trigger at minor version 200, but at minor version 250, you decide to rename the backing column from <span class="cv_-_computer_voice">A</span> to <span class="cv_-_computer_voice">B</span>. The version trigger you wrote in the past would break because it would execute before the rename operation and would try to use the new column name.</div>
      <div class="B_-_Body"><span class="cv_-_computer_voice"><a name="2022334">AfterUpgradeVersionTrigger</a></span> is very similar to <span class="cv_-_computer_voice">BeforeUpgradeVersionTrigger</span>. A few differences include:</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2022335">The </a><span class="cv_-_computer_voice">AfterUpgradeVersionTrigger</span> DML builders use the query builder, <span class="cv_-_computer_voice">IQueryBuilder</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2022336">In an </a><span class="cv_-_computer_voice">AfterUpgradeVersionTrigger</span> you can use properties and types in addition to strings.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2022337">Some DDL operations are not provided on the </a><span class="cv_-_computer_voice">IAfterUpgradeTable</span> object, including creating a table or adding a column.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2022338">Unless you require one of the unique capabilities of </a><span class="cv_-_computer_voice">AfterUpgradeVersionTrigger</span>, use <span class="cv_-_computer_voice">BeforeUpgradeVersionTrigger</span> for custom version triggers.</div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="2022339">Upgrading Typelists</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2022340">The </a><span class="cv_-_computer_voice">BeforeUpgradeVersionTrigger</span> class includes a <span class="cv_-_computer_voice">getTypeKeyID</span> method with the following signature:</div>
      <div class="CS_-_Code_Single_Line"><a name="2022341">protected final Integer getTypeKeyID(IEntityType subtype)</a></div>
      <div class="N_-_Note">
        <span class="n_-_note">Note: </span><a name="2022342">Protected methods do not appear in the Gosu documentation. Use </a><span class="cv_-_computer_voice">CTRL</span> + <span class="cv_-_computer_voice">SPACE</span> in Studio to show available methods and properties.</div>
      <div class="B_-_Body"><a name="2022343">The </a><span class="cv_-_computer_voice">getTypeKeyID</span> method returns the integer ID of the type code in the type list matching the given table name. This method checks both the existing typelist tables and the metadata files to determine what all typekey IDs will be after upgrade. Therefore, the <span class="cv_-_computer_voice">getTypeKeyID</span> method works as expected even before a new typekey or typelist table is created during the automatic schema upgrade phase. </div>
      <div class="B_-_Body"><a name="2022344">This method also works for orphaned typecodes that have not yet been removed from the database. These are typecodes that still exist in the database table but not in the metadata file. You can use the </a><span class="cv_-_computer_voice">getTypeKeyID</span> method for remapping usages of orphaned typecodes.</div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="2022345">Version Checks</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2022346">In some cases, you might want to check for a certain condition in the database before the upgrade proceeds. This is referred to as a version check. Only read operations are available in version checks. For example, you can write a version check to query a table or check the existence of a table or column, but the check cannot insert new rows. The </a><span class="cv_-_computer_voice">BeforeUpgradeVersionTrigger</span> class includes a <span class="cv_-_computer_voice">hasVersionCheck</span> method that you must define to return true or false. If the trigger does include a version check, overwrite the <span class="cv_-_computer_voice">createVersionCheck</span> method to define your custom version check. For standalone version checks that are not associated with a version trigger, you can use <span class="cv_-_computer_voice">BeforeUpgradeVersionCheckWrapper</span>. </div>
      <div class="B_-_Body"><a name="2022347">The upgrade executes all custom version checks before custom version triggers. The upgrade runs Guidewire version checks after all custom </a><span class="cv_-_computer_voice">BeforeUpgradeVersionTrigger</span> implementations, so you can create a <span class="cv_-_computer_voice">BeforeUpgradeVersionTrigger</span> to correct issues detected by the Guidewire version checks.</div>
      <div class="B_-_Body"><a name="2022348">If a custom version check fails, the upgrade stops before running any upgrade triggers. Correct the issue and restart the upgrade.</a></div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="2022349">Order of Execution</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2022350">The upgrade performs actions in the following order:</a></div>
      <div class="T_-_Table"><a name="2022402">&nbsp;</a></div>
      <table class="Shading" style="text-align: left" border="0" cellpadding="10" cellspacing="0" summary="">
        <caption></caption>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: bottom">
            <div class="TH_-_Table_Heading"><a name="2022353">Step</a></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: bottom">
            <div class="TH_-_Table_Heading"><a name="2022355">Action</a></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: bottom">
            <div class="TH_-_Table_Heading"><a name="2022357">In the event of failure due to a data issue...</a></div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="2022359">1</a></div>
          </td>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="2022361">Custom version checks</a></div>
          </td>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="2022363">Correct the data issue. Restart the upgrade. You do not need to restore the database because the upgrade has not made any changes.</a></div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="2022365">2</a></div>
          </td>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="2022367">Custom </a><span class="cvt_-_computer_voice_table">BeforeUpgradeVersionTrigger</span> implementations</div>
          </td>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="2022369">Restore the database from a backup. Correct the data issue. Consider adding custom version checks to test for other instances of the data issue.</a></div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="2022371">3</a></div>
          </td>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="2022373">Guidewire version checks</a></div>
          </td>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="2022375">If you do not have any custom </a><span class="cvt_-_computer_voice_table">BeforeUpgradeVersionTrigger</span> implementations, correct the data issue and restart the upgrade. </div>
            <div class="TT_-_Table_Text"><a name="2022376">If you do have custom </a><span class="cvt_-_computer_voice_table">BeforeUpgradeVersionTrigger</span> implementations, restore the database from a backup. Then, correct the data issue.</div>
            <div class="TT_-_Table_Text"><a name="2022377">In either case, consider creating a custom </a><span class="cvt_-_computer_voice_table">BeforeUpgradeVersionTrigger</span> implementation to correct the data issue.</div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="2022379">4</a></div>
          </td>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="2022381">Guidewire version triggers</a></div>
          </td>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="2022383">A failure due to data issues at this stage is unlikely. Contact Guidewire Support.</a></div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="2022385">5</a></div>
          </td>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="2022387">Automated data model upgrade to update the database to the defined data model.</a></div>
          </td>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="2022389">A failure due to data issues at this stage is unlikely. Contact Guidewire Support.</a></div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="2022391">6</a></div>
          </td>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="2022393">Guidewire version triggers that require the updated data model in the database</a></div>
          </td>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="2022395">A failure due to data issues at this stage is unlikely. Contact Guidewire Support.</a></div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="2022397">7</a></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="2022399">Custom </a><span class="cvt_-_computer_voice_table">AfterUpgradeVersionTrigger</span> implementations</div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 2pt; padding-left: 2pt; padding-right: 8pt; padding-top: 2pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="2022401">Restore the database from a backup. Correct the data issue. Consider creating a custom </a><span class="cvt_-_computer_voice_table">BeforeUpgradeVersionTrigger</span> implementation to correct the data issue if possible.</div>
          </td>
        </tr>
      </table>
      <div class="B_-_Body"><a name="2022403">The preceding table describes failure cases that are caused by data issues. If the upgrade fails for other reasons, such as a disruption of the database server, fix the issue causing the disruption, restore the database, and restart the upgrade.</a></div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="2022404">Versioning</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2022405">Each </a><span class="cv_-_computer_voice">BeforeUpgradeVersionTrigger</span> and <span class="cv_-_computer_voice">AfterUpgradeVersionTrigger</span> instance requires a minor version number, passed as an integer. If the data model version number is less than or equal to the number passed to the instance, then the trigger executes. Whenever you make a data model change, or you want to force an upgrade, increment the version number in <span class="cv_-_computer_voice">extensions.properties</span>.</div>
      <h6 class="HS_-_Head_Sub"><a name="2022406">To run custom version checks and triggers</a></h6>
      <div class="LS_-_List_Start_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LS_-_List_Start_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	1.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LS_-_List_Start_inner"><a name="2022407">Create a new package, such as </a><span class="ps_-_parameter_in_code_snippets">companyName</span><span class="cv_-_computer_voice">.upgrade</span>, to store your custom version triggers.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LS2A_-_List_Start_002c_Level_2_Alpha_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LS2A_-_List_Start_002c_Level_2_Alpha_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">a.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LS2A_-_List_Start_002c_Level_2_Alpha_inner"><a name="2022408">Open Studio.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI2A_-_List_Item_002c_Level_2_Alpha_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI2A_-_List_Item_002c_Level_2_Alpha_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">b.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI2A_-_List_Item_002c_Level_2_Alpha_inner"><a name="2022409">In the Studio </a><span class="uis_-_UI_element_Studio">Project</span> window, expand <span class="uis_-_UI_element_Studio">configuration</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI2A_-_List_Item_002c_Level_2_Alpha_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI2A_-_List_Item_002c_Level_2_Alpha_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">c.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI2A_-_List_Item_002c_Level_2_Alpha_inner"><a name="2022413">Right-click </a><span class="uis_-_UI_element_Studio">gsrc</span> and click <span class="uis_-_UI_element_Studio">New</span> → <span class="uis_-_UI_element_Studio">Package</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI2A_-_List_Item_002c_Level_2_Alpha_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI2A_-_List_Item_002c_Level_2_Alpha_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">d.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI2A_-_List_Item_002c_Level_2_Alpha_inner"><a name="2022414">Enter a package name for upgrade purposes, such as </a><span class="ps_-_parameter_in_code_snippets">companyName</span><span class="cv_-_computer_voice">.upgrade</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	2.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="2022418">Right-click the upgrade package and click </a><span class="uis_-_UI_element_Studio">New</span> → <span class="uis_-_UI_element_Studio">Gosu Class</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	3.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="2022419">Enter a name for the class and click </a><span class="uis_-_UI_element_Studio">OK</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	4.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="2022420">Create a new Gosu class that extends </a><span class="cv_-_computer_voice">CustomerDatamodelUpgrade</span> and implements <span class="cv_-_computer_voice">IDatamodelUpgrade</span>. The class you create must define the <span class="cv_-_computer_voice">getBeforeUpgradeDatamodelChanges</span> and <span class="cv_-_computer_voice">getAfterUpgradeDatamodelChanges</span> methods. This class is the container from which you call custom version trigger classes.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LP_-_List_Para"><a name="2022421">For example:</a></div>
      <PRE class="CF_-_Code_First_Line"><a name="2022422">package </a><span class="pc_-_parameter_in_code">companyName</span>.upgrade</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022423">uses gw.plugin.upgrade.IDatamodelUpgrade</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022424">uses java.lang.Iterable</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022425">uses gw.api.database.upgrade.before.BeforeUpgradeVersionTrigger</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022426">uses gw.api.database.upgrade.after.AfterUpgradeVersionTrigger</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022427">uses java.util.ArrayList</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022428">uses gw.api.datamodel.upgrade.CustomerDatamodelUpgrade</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022429">uses gw.api.datamodel.upgrade.IDatamodelChange</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022430">uses gw.api.database.upgrade.DatamodelChangeWithoutArchivedDocumentChange</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022431">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022432">class TestDatamodelUpgradeImpl extends CustomerDatamodelUpgrade implements IDatamodelUpgrade {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022433">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022434">&nbsp;&nbsp;override property get BeforeUpgradeDatamodelChanges() :</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022435">&nbsp;&nbsp;List&lt;IDatamodelChange&lt;BeforeUpgradeVersionTrigger&gt;&gt; {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022436">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022437">&nbsp;&nbsp;&nbsp;&nbsp;var list = new ArrayList&lt;IDatamodelChange&lt;BeforeUpgradeVersionTrigger&gt;&gt;()</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022438">&nbsp;&nbsp;&nbsp;&nbsp;list.add(DatamodelChangeWithoutArchivedDocumentChange.make(new </a><span class="pc_-_parameter_in_code">BeforeVersionTrigger1</span>()))</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022439">&nbsp;&nbsp;&nbsp;&nbsp;list.add(DatamodelChangeWithoutArchivedDocumentChange.make(new </a><span class="pc_-_parameter_in_code">BeforeVersionTrigger2</span>()))</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022440">&nbsp;&nbsp;&nbsp;&nbsp;return list</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022441">&nbsp;&nbsp;}</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022442">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022443">&nbsp;&nbsp;override property get AfterUpgradeDatamodelChanges() :</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022444">&nbsp;&nbsp;List&lt;IDatamodelChange&lt;AfterUpgradeVersionTrigger&gt;&gt; {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022445">&nbsp;&nbsp;&nbsp;&nbsp;var list = new ArrayList&lt;IDatamodelChange&lt;AfterUpgradeVersionTrigger&gt;&gt;()</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022446">&nbsp;&nbsp;&nbsp;&nbsp;list.add(DatamodelChangeWithoutArchivedDocumentChange.make(new </a><span class="pc_-_parameter_in_code">AfterVersionTrigger1</span>()))</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022447">&nbsp;&nbsp;&nbsp;&nbsp;return list</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022448">&nbsp;&nbsp;}</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="2022449">} </a></PRE>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	5.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="2022450">Create your custom </a><span class="cv_-_computer_voice">BeforeUpgradeVersionTrigger</span> and <span class="cv_-_computer_voice">AfterUpgradeVersionTrigger</span> Gosu classes. See <a href="javascript:WWHClickedPopup('upgrade', 'procedure-db-c.17.16.html#2022488', '');" title="Customizing the Upgrade">“IDatamodelUpgrade API Examples”</a>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	6.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="2022454">Implement the </a><span class="cv_-_computer_voice">IDatamodelUpgrade</span> plugin with the new class.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LS2A_-_List_Start_002c_Level_2_Alpha_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LS2A_-_List_Start_002c_Level_2_Alpha_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">a.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LS2A_-_List_Start_002c_Level_2_Alpha_inner"><a name="2022464">Start Guidewire Studio 8.0.3 by entering </a><span class="cv_-_computer_voice">gwpc studio</span> from the <span class="cv_-_computer_voice">PolicyCenter/bin</span> directory.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI2A_-_List_Item_002c_Level_2_Alpha_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI2A_-_List_Item_002c_Level_2_Alpha_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">b.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI2A_-_List_Item_002c_Level_2_Alpha_inner"><a name="2022471">In Studio, expand </a><span class="uis_-_UI_element_Studio">configuration</span> → <span class="uis_-_UI_element_Studio">config</span> → <span class="uis_-_UI_element_Studio">Plugins</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI2A_-_List_Item_002c_Level_2_Alpha_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI2A_-_List_Item_002c_Level_2_Alpha_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">c.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI2A_-_List_Item_002c_Level_2_Alpha_inner"><a name="2022475">Right-click </a><span class="uis_-_UI_element_Studio">registry</span> and click <span class="uis_-_UI_element_Studio">New</span> → <span class="uis_-_UI_element_Studio">Plugin</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI2A_-_List_Item_002c_Level_2_Alpha_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI2A_-_List_Item_002c_Level_2_Alpha_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">d.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI2A_-_List_Item_002c_Level_2_Alpha_inner"><a name="2022476">In the </a><span class="uis_-_UI_element_Studio">Plugin</span> dialog, enter a name, such as <span class="cv_-_computer_voice">DatamodelUpgradePlugin</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI2A_-_List_Item_002c_Level_2_Alpha_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI2A_-_List_Item_002c_Level_2_Alpha_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">e.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI2A_-_List_Item_002c_Level_2_Alpha_inner"><a name="2022477">In the </a><span class="uis_-_UI_element_Studio">Plugin</span> dialog, click the <span class="uis_-_UI_element_Studio">...</span> button.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI2A_-_List_Item_002c_Level_2_Alpha_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI2A_-_List_Item_002c_Level_2_Alpha_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">f.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI2A_-_List_Item_002c_Level_2_Alpha_inner"><a name="2022478">In the </a><span class="uis_-_UI_element_Studio">Select Plugin Class</span> dialog, type <span class="cv_-_computer_voice">IDatamodelUpgrade</span> and select the <span class="uis_-_UI_element_Studio">IDatamodelUpgrade</span> interface.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI2A_-_List_Item_002c_Level_2_Alpha_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI2A_-_List_Item_002c_Level_2_Alpha_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">g.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI2A_-_List_Item_002c_Level_2_Alpha_inner"><a name="2022482">In the </a><span class="uis_-_UI_element_Studio">Plugin</span> dialog, click OK. Studio creates a GWP file under <span class="uis_-_UI_element_Studio">Plugins</span> → <span class="uis_-_UI_element_Studio">registry</span> with the name you entered.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI2A_-_List_Item_002c_Level_2_Alpha_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI2A_-_List_Item_002c_Level_2_Alpha_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">h.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI2A_-_List_Item_002c_Level_2_Alpha_inner"><a name="2022483">Click the </a><span class="uis_-_UI_element_Studio">Add Plugin</span> icon (a plus sign) and select <span class="uis_-_UI_element_Studio">Add Gosu Plugin</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI2A_-_List_Item_002c_Level_2_Alpha_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI2A_-_List_Item_002c_Level_2_Alpha_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">i.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI2A_-_List_Item_002c_Level_2_Alpha_inner"><a name="2022484">For </a><span class="uis_-_UI_element_Studio">Gosu Class</span>, enter your class, including the package.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI2A_-_List_Item_002c_Level_2_Alpha_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI2A_-_List_Item_002c_Level_2_Alpha_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">j.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI2A_-_List_Item_002c_Level_2_Alpha_inner"><a name="2022485">Save your changes.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LP_-_List_Para"><a name="2022486">When you start the server to perform the database upgrade from a prior major version, the upgrade calls the plugin and runs your custom methods.</a></div>
      <h4 class="H2_-_Heading_2"><span class="cvh_-_computer_voice_in_heading"><a name="2022488">IDatamodelUpgrade</a></span> API Examples</h4>
      <div class="B_-_Body"><a name="2022489">This topic first introduces the basic structure of a </a><span class="cv_-_computer_voice">BeforeUpgradeVersionTrigger</span> and <span class="cv_-_computer_voice">AfterUpgradeVersionTrigger</span>. Next it shows methods that can be included within the <span class="cv_-_computer_voice">execute</span> method of these triggers to modify the database.</div>
      <div class="B_-_Body"><a name="2022490">This topic includes:</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a href="javascript:WWHClickedPopup('upgrade', 'procedure-db-c.17.16.html#2022548', '');" title="Customizing the Upgrade" name="2022494">BeforeUpgradeVersionTrigger Structure</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a href="javascript:WWHClickedPopup('upgrade', 'procedure-db-c.17.16.html#2022592', '');" title="Customizing the Upgrade" name="2022498">AfterUpgradeVersionTrigger Structure</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a href="javascript:WWHClickedPopup('upgrade', 'procedure-db-c.17.16.html#2022614', '');" title="Customizing the Upgrade" name="2022502">Altering Columns to Match Data Model</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a href="javascript:WWHClickedPopup('upgrade', 'procedure-db-c.17.16.html#2022633', '');" title="Customizing the Upgrade" name="2022506">Altering a Non-nullable Column to Nullable</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a href="javascript:WWHClickedPopup('upgrade', 'procedure-db-c.17.16.html#2022640', '');" title="Customizing the Upgrade" name="2022510">Creating Columns</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a href="javascript:WWHClickedPopup('upgrade', 'procedure-db-c.17.16.html#2022694', '');" title="Customizing the Upgrade" name="2022514">Dropping Columns</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a href="javascript:WWHClickedPopup('upgrade', 'procedure-db-c.17.16.html#2022706', '');" title="Customizing the Upgrade" name="2022518">Renaming Columns</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a href="javascript:WWHClickedPopup('upgrade', 'procedure-db-c.17.16.html#2022712', '');" title="Customizing the Upgrade" name="2022522">Setting a Column Value for a Specific Subtype</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a href="javascript:WWHClickedPopup('upgrade', 'procedure-db-c.17.16.html#2022725', '');" title="Customizing the Upgrade" name="2022526">Creating Tables</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a href="javascript:WWHClickedPopup('upgrade', 'procedure-db-c.17.16.html#2022741', '');" title="Customizing the Upgrade" name="2022530">Renaming Tables</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a href="javascript:WWHClickedPopup('upgrade', 'procedure-db-c.17.16.html#2022747', '');" title="Customizing the Upgrade" name="2022534">Deleting Rows</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a href="javascript:WWHClickedPopup('upgrade', 'procedure-db-c.17.16.html#2022758', '');" title="Customizing the Upgrade" name="2022538">Inserting Rows</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a href="javascript:WWHClickedPopup('upgrade', 'procedure-db-c.17.16.html#2022781', '');" title="Customizing the Upgrade" name="2022542">Inserting Data Selected from Another Table</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a href="javascript:WWHClickedPopup('upgrade', 'procedure-db-c.17.16.html#2022813', '');" title="Customizing the Upgrade" name="2022546">Updating Rows</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><span class="cvh_-_computer_voice_in_heading"><a name="2022548">BeforeUpgradeVersionTrigger</a></span> Structure</h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2022549">A custom </a><span class="cv_-_computer_voice">BeforeUpgradeVersionTrigger</span> subclass has the following structure. </div>
      <PRE class="CF_-_Code_First_Line"><a name="2022550">package </a><span class="pc_-_parameter_in_code">companyName</span>.upgrade.before</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022551">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022552">uses gw.api.database.upgrade.before.BeforeUpgradeVersionCheck</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022553">uses gw.api.database.upgrade.before.BeforeUpgradeVersionTrigger</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022554">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022555">class myBeforeUpgradeTrigger extends BeforeUpgradeVersionTrigger {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022556">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022557">  construct() {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022558">    super(</a><span class="pc_-_parameter_in_code">dataModelVersionNumber</span>)</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022559">  }</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022560">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022561">&nbsp;&nbsp;override function execute() {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022562">&nbsp;&nbsp;&nbsp;&nbsp;// Perform actions here.</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022563">&nbsp;&nbsp;}</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022564">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022565">&nbsp;&nbsp;override function hasVersionCheck() : boolean {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022566">&nbsp;&nbsp;&nbsp;&nbsp;// return true if creating a version check to determine whether the trigger can run.</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022567">&nbsp;&nbsp;&nbsp;&nbsp;// return false if you are not implementing a version check.</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022568">&nbsp;&nbsp;}</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022569">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022570">&nbsp;&nbsp;override property get Description() : String {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022571">&nbsp;&nbsp;&nbsp;&nbsp;return "</a><span class="pc_-_parameter_in_code">Description of the version trigger.</span>"</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022572">&nbsp;&nbsp;}</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022573">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022574">&nbsp;&nbsp;// Override the createVersionCheck method if you are implementing a version check.</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022575">&nbsp;&nbsp;override function createVersionCheck() : BeforeUpgradeVersionCheck {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022576">&nbsp;&nbsp;&nbsp;&nbsp;return new BeforeUpgradeVersionCheck(</a><span class="pc_-_parameter_in_code">dataModelVersionNumber</span>) {</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022577">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022578">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;override function verifyUpgradability() {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022579">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (</a><span class="pc_-_parameter_in_code">condition to detect</span>) {</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022580">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;addVersionCheckProblem("</a><span class="pc_-_parameter_in_code">description of issue</span>")</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022581">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022582">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022583">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022584">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;override property get Description() : String {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022585">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return "</a><span class="pc_-_parameter_in_code">Description of the version check.</span>"</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022586">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022587">&nbsp;&nbsp;&nbsp;&nbsp;}</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022588">&nbsp;&nbsp;}</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="2022589">}</a></PRE>
      <div class="B_-_Body"><a name="2022590">Define the execute method to perform the actions you want your custom trigger to perform. Some examples are provided in subsequent topics.</a></div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><span class="cvh_-_computer_voice_in_heading"><a name="2022592">AfterUpgradeVersionTrigger</a></span> Structure</h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2022593">A custom </a><span class="cv_-_computer_voice">AfterUpgradeVersionTrigger</span> subclass has the following structure.</div>
      <PRE class="CF_-_Code_First_Line"><a name="2022594">package </a><span class="pc_-_parameter_in_code">companyName</span>.upgrade.after</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022595">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022596">uses gw.api.database.upgrade.after.AfterUpgradeVersionTrigger</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022597">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022598">class myAfterUpgradeTrigger extends AfterUpgradeVersionTrigger{</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022599">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022600">  construct() {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022601">    super(</a><span class="pc_-_parameter_in_code">dataModelVersionNumber</span>)</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022602">  }</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022603">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022604">&nbsp;&nbsp;override function execute() {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022605">&nbsp;&nbsp;&nbsp;&nbsp;// Perform actions here.</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022606">&nbsp;&nbsp;}</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022607">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022608">&nbsp;&nbsp;override property get Description() : String {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022609">&nbsp;&nbsp;&nbsp;&nbsp;return "</a><span class="pc_-_parameter_in_code">Description of the version trigger.</span>"</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022610">&nbsp;&nbsp;}</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022611">&nbsp;</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="2022612">}</a></PRE>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="2022614">Altering Columns to Match Data Model</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2022615">In most cases, you do not need to alter a column to match a change to the column type in the logical data model. The upgrader automatically applies data model changes to the database. However, this occurs after all custom </a><span class="cv_-_computer_voice">BeforeUpgradeVersionTrigger</span> instances have run, so Guidewire provides methods to alter database columns to match the data model. </div>
      <h6 class="HS_-_Head_Sub"><a name="2022616">Altering a single column</a></h6>
      <div class="B_-_Body"><a name="2022617">If you need to alter a single column for use in a </a><span class="cv_-_computer_voice">BeforeUpgradeVersionTrigger</span>, modify the data model file, then use the <span class="cv_-_computer_voice">alterColumnTypeToMatchDatamodel</span> method of <span class="cv_-_computer_voice">IBeforeUpgradeColumn</span>.</div>
      <div class="B_-_Body"><a name="2022618">For example:</a></div>
      <PRE class="CF_-_Code_First_Line"><a name="2022619">var table = getTable("TableName")</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022620">var column = table.getColumn("ColumnName")</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022621">column.alterColumnTypeToMatchDatamodel()</a></PRE>
      <h6 class="HS_-_Head_Sub"><a name="2022622">Altering multiple column</a></h6>
      <div class="B_-_Body"><a name="2022623">To alter multiple columns for use in a </a><span class="cv_-_computer_voice">BeforeUpgradeVersionTrigger</span>, modify the data model file, then use the <span class="cv_-_computer_voice">alterMultipleColumnsToMatchDatamodel</span> method of <span class="cv_-_computer_voice">IBeforeUpgradeTable</span>.</div>
      <div class="B_-_Body"><a name="2022624">For example:</a></div>
      <PRE class="CF_-_Code_First_Line"><a name="2022625">var table = getTable("TableName")</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022626">var columnsToChange = new IBeforeUpgradeColumn[2]</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022627">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022628">columnsToChange[0] = table.getColumn("column1")</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022629">columnsToChange[1] = table.getColumn("column1")</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022630">&nbsp;</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="2022631">table.alterMultipleColumnsToMatchDatamodel(columnsToChange)</a></PRE>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="2022633">Altering a Non-nullable Column to Nullable</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2022634">To alter a column from non-nullable to nullable, use the </a><span class="cv_-_computer_voice">IBeforeUpgradeColumn</span> method <span class="cv_-_computer_voice">alterColumnToNullable</span>.</div>
      <div class="B_-_Body"><a name="2022635">For example:</a></div>
      <PRE class="CF_-_Code_First_Line"><a name="2022636">var table = getTable("</a><span class="pc_-_parameter_in_code">TableName</span>");</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022637"> </a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="2022638">table.getColumn("</a><span class="pc_-_parameter_in_code">ColumnName</span>").alterColumnToNullable();</PRE>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="2022640">Creating Columns</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2022641">The database upgrader automatically creates a column that is added to the data model if the column meets one of the following criteria:</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2022642">Nullable</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2022643">Non-nullable with a default value specified in the metadata</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2022644">Non-nullable without a default value if there are no rows in the table</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2022645">The column is an editable field</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2022646">However, you might want to explicitly create the column in your upgrade trigger if you want the trigger to perform an action on the column such as populating it.</a></div>
      <div class="B_-_Body"><a name="2022647">In the data model, the column must be defined as a property on an entity. The database upgrade will determine the correct datatype and nullability from the data model.</a></div>
      <div class="B_-_Body"><a name="2022648">Creating a new column is moderately expensive in terms of performance of the upgrade.</a></div>
      <h6 class="HS_-_Head_Sub"><a name="2022649">Creating a Column</a></h6>
      <div class="B_-_Body"><a name="2022650">To create a column, invoke the </a><span class="cv_-_computer_voice">create</span> method on the <span class="cv_-_computer_voice">IBeforeUpgradeColumn</span>.</div>
      <div class="B_-_Body"><a name="2022651">For example:</a></div>
      <PRE class="CF_-_Code_First_Line"><a name="2022652">var table = getTable("TableName")</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022653"> </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022654"> // Create column with given name.</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022655"> // Column must be backed by a property on an entity.</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022656"> // Upgrader will figure out the correct datatype and nullability.</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022657"> </a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="2022658"> table.getColumn("ColumnName").create()</a></PRE>
      <h6 class="HS_-_Head_Sub"><a name="2022659">Creating a Non-nullable Column with an Initial Value</a></h6>
      <div class="B_-_Body"><a name="2022660">The upgrader throws an exception if you try to add a new non-nullable column without a default value and there are rows in the table. For non-nullable columns, either specify a default value, or create a version trigger that will populate the column.</a></div>
      <div class="B_-_Body"><a name="2022661">To create a new column as non-nullable with an initial value, use the </a><span class="cv_-_computer_voice">createNonNullableWithInitialValue()</span> method. In the data model, the column must be defined as non-nullable.</div>
      <div class="B_-_Body"><a name="2022662">For example:</a></div>
      <PRE class="CF_-_Code_First_Line"><a name="2022663">IBeforeUpgradeTable table = getTable("TableName")</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="2022664">table.getColumn("ColumnName").createNonNullableWithInitialValue(</a><span class="pc_-_parameter_in_code">Initial value</span>)</PRE>
      <div class="B_-_Body"><a name="2022665">The initial value must be of the appropriate type for the column's datatype. You can alter this value in later steps as needed.</a></div>
      <h6 class="HS_-_Head_Sub"><a name="2022666">Creating a Temporary Column</a></h6>
      <div class="B_-_Body"><a name="2022667">Use the </a><span class="cv_-_computer_voice">createTempColumn</span> method of <span class="cv_-_computer_voice">IBeforeUpgradeTable</span> to add a temporary column to the table. The <span class="cv_-_computer_voice">createTempColumn</span> method takes two parameters, a <span class="cv_-_computer_voice">String</span> for the column name and an <span class="cv_-_computer_voice">IDataType</span> for the column data type. <span class="cv_-_computer_voice">createTempColumn</span> creates a new nullable column with the given name and datatype to hold temporary data. You must explicitly drop the temporary column during the upgrade. The schema verifier will report an error during server startup if the column has not been dropped. You can create the temporary column in a <span class="cv_-_computer_voice">BeforeUpgradeVersionTrigger</span> and drop it in an <span class="cv_-_computer_voice">AfterUpgradeVersionTrigger</span>. This approach is useful when you want to move data from a column that will be removed during the upgrade to a column that will be created during the upgrade.</div>
      <div class="B_-_Body"><a name="2022668">In the following example, a </a><span class="cv_-_computer_voice">BeforeUpgradeVersionTrigger</span> adds a temporary <span class="cv_-_computer_voice">shorttext</span> column to an existing entity and populates it with data from another column on a different entity. An <span class="cv_-_computer_voice">AfterUpgradeVersionTrigger</span> moves the data to a new entity.</div>
      <div class="B_-_Body" style="color: #000000; font-style: normal; font-variant: normal; font-weight: bold; margin-bottom: 2.0pt; margin-top: 5.0pt; text-transform: none; vertical-align: baseline"><span class="ri_-_run_in_header"><a name="2022669">BeforeUpgradeVersionTrigger Execute Method</a></span></div>
      <PRE class="CF_-_Code_First_Line"><a name="2022670">// Add a temporary column to TableA.</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022671">var tableA = getTable("TableA")</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022672">var tempColumn = tableA.createTempColumn("tmp_column", DataTypes.shorttext())</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022673">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022674">// Get an IBeforeUpgradeUpdateBuilder for TableA.</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022675">var ub = tableA.update()</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022676">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022677">// Set the value of the temporary column to the value of ColumnA.</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022678">ub.set(tempColumn, ub.getColumnRef("ColumnA")) </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022679">&nbsp;</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="2022680">ub.execute()</a></PRE>
      <div class="B_-_Body" style="color: #000000; font-style: normal; font-variant: normal; font-weight: bold; margin-bottom: 2.0pt; margin-top: 5.0pt; text-transform: none; vertical-align: baseline"><span class="ri_-_run_in_header"><a name="2022681">AfterUpgradeVersionTrigger Execute Method</a></span></div>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022682">// Get an IUpdateBuilder for TableA.</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022683">var ub = getTable("TableA").update().withLogSQL(true)</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022684">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022685">var q = new Query(Account).withLogSQL(true)</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022686">q.compare("ID", Equals, ub.getQuery().getColumnRef("Account"))</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022687">var piDesc = PaymentInstrument.Type.TypeInfo.getProperty("Description") as IEntityPropertyInfo</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022688">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022689">ub.set(piDesc, q, q.getColumnRef(DBFunction.Expr({"tmp_xyz"}))) // tmp_xyz is the DB table column name</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022690">ub.execute() </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022691">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022692">var tempColumn = getTable("someTable").getColumn("tmp_xyz").drop()</a></PRE>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="2022694">Dropping Columns</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2022695">The upgrader does not drop existing columns in order to prevent data loss. You can write a version trigger to move the data (not shown in example) and then drop the column by using the </a><span class="cv_-_computer_voice">drop()</span> method of the <span class="cv_-_computer_voice">IBeforeUpgradeColumn</span>.</div>
      <div class="B_-_Body"><a name="2022696">For example:</a></div>
      <PRE class="CF_-_Code_First_Line"><a name="2022697">var table = getTable("</a><span class="pc_-_parameter_in_code">TableName</span>")</PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="2022698">table.getColumn("</a><span class="pc_-_parameter_in_code">ColumnName</span>").drop()</PRE>
      <div class="B_-_Body"><a name="2022699">There is a </a><span class="cv_-_computer_voice">dropColumns</span> method on <span class="cv_-_computer_voice">IBeforeUpgradeTable</span> to drop multiple columns in one statement. The <span class="cv_-_computer_voice">dropColumns</span> method takes an array of <span class="cv_-_computer_voice">IBeforeUpgradeColumn</span> objects.</div>
      <div class="B_-_Body"><a name="2022700">For example:</a></div>
      <PRE class="CF_-_Code_First_Line"><a name="2022701">var table = getTable("</a><span class="pc_-_parameter_in_code">TableName</span>")</PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="2022702">table.dropColumns(table.getColumn("</a><span class="pc_-_parameter_in_code">ColumnName2</span>"), table.getColumn("<span class="pc_-_parameter_in_code">ColumnName3</span>"));</PRE>
      <div class="B_-_Body"><a name="2022703">In Oracle, dropping a column usually has little effect on upgrade performance. Dropping a column actually marks the column as unused in the metadata. At a later point, the DBA is responsible for performing the necessary cleanup. You can override this functionality and force columns to be dropped right away.</a></div>
      <div class="B_-_Body"><a name="2022704">In SQL Server, dropping a column is performance-intensive because the RDBMS has to do some clean up work.</a></div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="2022706">Renaming Columns</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2022707">To rename a column use the rename function on the column object.</a></div>
      <PRE class="CF_-_Code_First_Line"><a name="2022708">override function execute() {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022709">&nbsp;&nbsp;getTable("</a><span class="pc_-_parameter_in_code">TableName</span>").getColumn("<span class="pc_-_parameter_in_code">ColumnName</span>").rename("<span class="pc_-_parameter_in_code">NewColumnName</span>")</PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="2022710">}</a></PRE>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="2022712">Setting a Column Value for a Specific Subtype</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2022713">To set a column to a specific value for specific subtypes, use the </a><span class="cv_-_computer_voice">set</span> and <span class="cv_-_computer_voice">compare</span> methods of an <span class="cv_-_computer_voice">IBeforeUpgradeTable</span>. Get the typekey ID for comparison using the <span class="cv_-_computer_voice">BeforeUpgradeVersionTrigger</span> method <span class="cv_-_computer_voice">getTypekeyID</span>.</div>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022714">&nbsp;&nbsp;&nbsp;&nbsp;final var myTable = getTable("tableName")</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022715">&nbsp;&nbsp;&nbsp;&nbsp;final var myTypecode = getTypeKeyID("</a><span class="pc_-_parameter_in_code">typelist name</span>", "<span class="pc_-_parameter_in_code">typelist code</span>")</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022716">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022717">&nbsp;&nbsp;&nbsp;&nbsp;final var updateBuilder = myTable.update()</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022718">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022719">&nbsp;&nbsp;&nbsp;&nbsp;updateBuilder</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022720">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.set("myColumn", "</a><span class="pc_-_parameter_in_code">some value</span>")</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022721">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.compare("subtype", Equals, myTypecode)</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022722">&nbsp;</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="2022723">&nbsp;&nbsp;&nbsp;&nbsp;updateBuilder.execute()</a></PRE>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="2022725">Creating Tables</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2022726">To add a new table to the database, define a new entity in the data model. The upgrade creates the table automatically. However, you might want to explicitly create the table in your upgrade trigger if you want the trigger to perform an action on the table such as populating it.</a></div>
      <div class="B_-_Body"><a name="2022727">Creating a new table has negligible impact on upgrade performance. </a></div>
      <div class="B_-_Body"><a name="2022728">You can create a regular table using the </a><span class="cv_-_computer_voice">create</span> method of <span class="cv_-_computer_voice">IBeforeUpgradeTable</span>. The table must first be defined in the data model.</div>
      <div class="B_-_Body"><a name="2022729">For example:</a></div>
      <div class="CS_-_Code_Single_Line"><a name="2022730">var table = getTable("</a><span class="pc_-_parameter_in_code">TableName</span>").create()</div>
      <h6 class="HS_-_Head_Sub"><a name="2022731">Creating Temporary Tables</a></h6>
      <div class="B_-_Body"><a name="2022732">You can add a temporary table to the database based on either the current database schema for a table or the data model definition of a table. You can also create a temporary table with a custom definition.</a></div>
      <div class="B_-_Body"><a name="2022733">To create a temporary table based on the current table schema in the database, use the </a><span class="cv_-_computer_voice">createNewTempTableBasedOnCurrentSchema</span> method of <span class="cv_-_computer_voice">IBeforeUpgradeTable</span>. The table must be associated with an entity and exist in the database. The returned temporary table will contain the columns that this table has in the database currently. The columns may not match those specified in the entity metadata. For example, the metadata might contain a new column that has not yet been created. The <span class="cv_-_computer_voice">createNewTempTableBasedOnCurrentSchema</span> method is usually more appropriate than <span class="cv_-_computer_voice">createNewTempTableBasedOnThis</span> if you want to copy data from this table into the new temporary table as the columns will match exactly.</div>
      <div class="B_-_Body"><a name="2022734">For example:</a></div>
      <div class="CS_-_Code_Single_Line"><a name="2022735">var table = getTable("</a><span class="pc_-_parameter_in_code">TableName</span>").createNewTempTableBasedOnCurrentSchema()</div>
      <div class="B_-_Body"><a name="2022736">To create a temporary table based on the entity definition of a table in the data model, use the </a><span class="cv_-_computer_voice">createNewTempTableBasedOnThis</span> method of <span class="cv_-_computer_voice">IBeforeUpgradeTable</span>. Columns that do not exist in the table are not created on the temporary table, even if the metadata defines such a column. This table may not contain columns that are going to be renamed. The metadata reflects the new name for the column but does not have an entry for the old name, so it would not be added to the temporary table. </div>
      <div class="B_-_Body"><a name="2022737">For example:</a></div>
      <div class="CS_-_Code_Single_Line"><a name="2022738">var table = getTable("</a><span class="pc_-_parameter_in_code">TableName</span>").createNewTempTableBasedOnThis()</div>
      <div class="B_-_Body"><a name="2022739">To create a temporary table with a custom definition, use the </a><span class="cv_-_computer_voice">createAsNewTempTable</span> method of <span class="cv_-_computer_voice">IBeforeUpgradeTable</span>. This method takes a Pair array in which the first object is a <span class="cv_-_computer_voice">String</span> defining the column name and the second object is an <span class="cv_-_computer_voice">IDataType</span> defining the column data type.</div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="2022741">Renaming Tables</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2022742">To rename a table use the rename function on the table object.</a></div>
      <PRE class="CF_-_Code_First_Line"><a name="2022743">override function execute() {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022744">&nbsp;&nbsp;getTable("</a><span class="pc_-_parameter_in_code">extTableName</span>").rename("<span class="pc_-_parameter_in_code">TableName_EXT</span>")</PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="2022745">}</a></PRE>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="2022747">Deleting Rows</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2022748">To delete rows from a table, use the </a><span class="cv_-_computer_voice">delete</span> method of <span class="cv_-_computer_voice">IBeforeUpgradeTable</span> or <span class="cv_-_computer_voice">IAfterUpgradeTable</span>. The <span class="cv_-_computer_voice">delete</span> method returns a delete builder (<span class="cv_-_computer_voice">IBeforeUpgradeDeleteBuilder</span> that provides methods for comparing column data to restrict the rows that are deleted.</div>
      <div class="B_-_Body"><a name="2022749">In the following example, all rows that have a </a><span class="cv_-_computer_voice">columnA</span> value of <span class="cv_-_computer_voice">0</span> are deleted.</div>
      <PRE class="CF_-_Code_First_Line"><a name="2022750">var table =  getTable("SomeTable")</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022751">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022752">var deleteBuilder = table.delete()</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022753">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022754">deleteBuilder.Query.compare("columnA", Equals, 0)</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022755">&nbsp;</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="2022756">deleteBuilder.execute()</a></PRE>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="2022758">Inserting Rows</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2022759">To insert rows of data use the </a><span class="cv_-_computer_voice">insert</span> method of <span class="cv_-_computer_voice">IBeforeUpgradeTable</span> or <span class="cv_-_computer_voice">IAfterUpgradeTable</span>. The <span class="cv_-_computer_voice">insert</span> method returns a builder (<span class="cv_-_computer_voice">IBeforeUpgradeInsertBuilder</span> for <span class="cv_-_computer_voice">IBeforeUpgradeTable</span>, <span class="cv_-_computer_voice">IInsertBuilder</span> for <span class="cv_-_computer_voice">IAfterUpgradeTable)</span> for SQL to perform an insert operation.</div>
      <div class="B_-_Body"><a name="2022760">In the following example, an </a><span class="cv_-_computer_voice">IBeforeUpgradeInsertBuilder</span> is used to add two rows with three columns to table <span class="cv_-_computer_voice">myTable</span>. The <span class="cv_-_computer_voice">IBeforeUpgradeInsertBuilder</span> includes a description.</div>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022761">&nbsp;&nbsp;&nbsp;&nbsp;var myTable = getTable("SomeTable")</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022762">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022763">&nbsp;&nbsp;&nbsp;&nbsp;var insertBuilder = myTable.insert().withDescription("A custom insert</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022764">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;trigger to add two rows.")</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022765">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022766">&nbsp;&nbsp;&nbsp;&nbsp;insertBuilder</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022767">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.mapColumn("columnA", "</a><span class="pc_-_parameter_in_code">value of column A for first row</span>")</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022768">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.mapColumn("columnB", "</a><span class="pc_-_parameter_in_code">value of column B for first row</span>")</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022769">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.mapColumn("columnC", "</a><span class="pc_-_parameter_in_code">value of column C for first row</span>")</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022770">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022771">&nbsp;&nbsp;&nbsp;&nbsp;insertBuilder.execute()</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022772">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022773">// add a second row</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022774">&nbsp;&nbsp;&nbsp;&nbsp;insertBuilder</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022775">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.mapColumn("columnA", "</a><span class="pc_-_parameter_in_code">value of column A for second row</span>")</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022776">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.mapColumn("columnB", "</a><span class="pc_-_parameter_in_code">value of column B for second row</span>")</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022777">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.mapColumn("columnC", "</a><span class="pc_-_parameter_in_code">value of column C for second row</span>")</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022778">&nbsp;</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="2022779">&nbsp;&nbsp;&nbsp;&nbsp;insertBuilder.execute()</a></PRE>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="2022781">Inserting Data Selected from Another Table</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2022782">To insert data selected from another table use the </a><span class="cv_-_computer_voice">insertSelect</span> method of <span class="cv_-_computer_voice">IBeforeUpgradeTable</span> or <span class="cv_-_computer_voice">IAfterUpgradeTable</span>. The <span class="cv_-_computer_voice">insertSelect</span> method returns a builder (<span class="cv_-_computer_voice">IBeforeUpgradeInsertSelectBuilder</span> for <span class="cv_-_computer_voice">IBeforeUpgradeTable</span>, <span class="cv_-_computer_voice">IInsertSelectBuilder</span> for <span class="cv_-_computer_voice">IAfterUpgradeTable</span>). The builder includes a <span class="cv_-_computer_voice">mapColumn</span> method that can be passed explicit values, columns, or a query.</div>
      <div class="B_-_Body"><a name="2022783">In the following example, the trigger sets </a><span class="cv_-_computer_voice">targetTable.column1</span> to an explicit value. The trigger sets <span class="cv_-_computer_voice">targetTable.column2</span> to the value of <span class="cv_-_computer_voice">sourceTable.sourceColumn</span>. Because there is no comparison being performed, the trigger will insert a row in the target table for each row in the source table:</div>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022784">var sourceTable = getTable("sourceTable")</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022785">var targetTable =  getTable("targetTable")</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022786">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022787">var insertSelectBuilder = targetTable.insertSelect(sourceTable)</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022788">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022789">insertSelectBuilder.mapColumn("column1", "value")    // sets a hard-coded value</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022790">&nbsp;&nbsp;.mapColumn("column2", sourceTable.getColumn("sourceColumn"))    // sets column2 on target table to</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022791">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// source table sourceColumn</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022792">&nbsp;</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="2022793">insertSelectBuilder.execute()</a></PRE>
      <div class="B_-_Body"><a name="2022794">In the next example, an existing table, </a><span class="cv_-_computer_voice">sourceTable</span>, is split into two tables, <span class="cv_-_computer_voice">targetTable1</span> and <span class="cv_-_computer_voice">targetTable2</span>. </div>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022795">var sourceTable = getTable("sourceTable")</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022796">var targetTable1 =  getTable("targetTable1")</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022797">var targetTable2 =  getTable("targetTable2")</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022798">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022799">var insertSelectBuilder1 = targetTable1.insertSelect(sourceTable)</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022800">var insertSelectBuilder2 = targetTable2.insertSelect(sourceTable)</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022801">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022802">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022803">insertSelectBuilder1.mapColumn("column1", sourceTable.getColumn("sourceColumn1")) </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022804">&nbsp;&nbsp;.mapColumn("column2", sourceTable.getColumn("sourceColumn2"))</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022805">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022806">insertSelectBuilder1.execute()</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022807">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022808">insertSelectBuilder2.mapColumn("column1", sourceTable.getColumn("sourceColumn3")) </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022809">&nbsp;&nbsp;.mapColumn("column2", sourceTable.getColumn("sourceColumn4"))</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022810">&nbsp;</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="2022811">insertSelectBuilder2.execute()</a></PRE>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="2022813">Updating Rows</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2022814">To update rows in a table, use the </a><span class="cv_-_computer_voice">update</span> method of <span class="cv_-_computer_voice">IBeforeUpgradeTable</span> or <span class="cv_-_computer_voice">IAfterUpgradeTable</span>. This method returns a builder (<span class="cv_-_computer_voice">IBeforeUpgradeUpdateBuilder</span> or <span class="cv_-_computer_voice">IUpdateBuilder</span>). The builder includes methods to compare data to restrict which rows are updated.</div>
      <div class="B_-_Body"><a name="2022815">In the following example, table </a><span class="cv_-_computer_voice">SomeTable</span> is updated to set <span class="cv_-_computer_voice">column1</span> to <span class="cv_-_computer_voice">SomeValue</span> for each row where the subtype matches a certain entity type:</div>
      <PRE class="CF_-_Code_First_Line"><a name="2022816">var table =  getTable("SomeTable")</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022817">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022818">// get IBeforeUpgradeUpdateBuilder</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022819">var ub = table.update()</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022820">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022821">// set column 1 to SomeValue</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022822">ub.set("column1", "SomeValue")</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022823">&nbsp;&nbsp;// where </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022824">&nbsp;&nbsp;.compare("subType", Equals, getTypeKeyID(</a><span class="pc_-_parameter_in_code">EntityType</span>)) </PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022825">&nbsp;</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="2022826">ub.execute()</a></PRE>
      <h4 class="H2_-_Heading_2"><a name="2022828">Upgrading Archived Entities</a></h4>
      <div class="B_-_Body"><a name="2022829">If you implement archiving, and you make custom data model changes, then you can upgrade the archived XML using the </a><span class="cv_-_computer_voice">IDatamodelUpgrade</span> plugin.</div>
      <div class="B_-_Body"><a name="2022830">Simple data model changes do not require a custom trigger. These include:</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2022831">Adding a new entity</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2022832">Updating denormalization columns</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2022833">Adding editable columns such as </a><span class="cv_-_computer_voice">updatetime</span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2022834">Adding new columns</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2022835">Changing the nullability of a column</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2022836">More complex transformations or those that could result in loss of data require a version trigger. These include:</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2022837">changing a datatype (other than just length)</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2022838">migrating data from one table or column to another</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2022839">dropping a column</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2022840">dropping a table</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2022841">renaming a column</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2022842">renaming a table</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2022846">PolicyCenter upgrades an archived entity as the entity is restored. </a></div>
      <div class="B_-_Body"><a name="2022847">The </a><span class="cv_-_computer_voice">IDatamodelChange</span> interface includes a <span class="cv_-_computer_voice">getArchivedDocumentUpgradeVersionTrigger</span><span style="font-family: &quot;Lucida Sans Typewriter&quot;; font-size: 7.0pt"> </span>method that returns an <span class="cv_-_computer_voice">ArchivedDocumentUpgradeVersionTrigger</span>.</div>
      <div class="B_-_Body"><a name="2022848">You can define custom </a><span class="cv_-_computer_voice">ArchivedDocumentUpgradeVersionTrigger</span> entities to modify archived XML. The <span class="cv_-_computer_voice">ArchivedDocumentUpgradeVersionTrigger</span> is an abstract class that you can extend to create your custom triggers.</div>
      <div class="B_-_Body"><a name="2022849">Define the constructor of your custom </a><span class="cv_-_computer_voice">ArchivedDocumentUpgradeVersionTrigger</span> to call the constructor of the superclass and pass it a numeric value. For example:</div>
      <PRE class="CF_-_Code_First_Line"><a name="2022850">construct() {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2022851">&nbsp;&nbsp;super(171)</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="2022852">}</a></PRE>
      <div class="B_-_Body"><a name="2022853">This numeric value is the extension version to which your trigger applies. If you run the upgrade against a database with a lower extension version, then your custom trigger is called. The current extension version is defined in </a><span class="cv_-_computer_voice">modules/configuration/config/extensions/extensions.properties.</span></div>
      <div class="B_-_Body"><a name="2022854">Provide an override definition of the </a><span class="cv_-_computer_voice">get Description</span> property to return a <span class="cv_-_computer_voice">String</span> that describes the actions of your trigger.</div>
      <div class="B_-_Body"><a name="2022855">Provide an override definition for the </a><span class="cv_-_computer_voice">execute</span> function to define the actions that you want your custom trigger to make on archived XML. </div>
      <div class="B_-_Body"><a name="2022856">When the upgrade executes your custom trigger, it wraps each XML entity in an </a><span class="cv_-_computer_voice">IArchivedEntity</span> object. Each typekey is wrapped in an <span class="cv_-_computer_voice">IArchivedTypekey</span> object. The upgrade operates on a single XML document at a time.</div>
      <div class="B_-_Body"><span class="cv_-_computer_voice"><a name="2022857">ArchivedDocumentUpgradeVersionTrigger</a></span> provides the following key operations:</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="2022858">getArchivedEntitySet(</a></span><span class="ps_-_parameter_in_code_snippets">entityName</span><span class="cv_-_computer_voice"> : String)</span> – returns an <span class="cv_-_computer_voice">IArchivedEntitySet</span> object that contains all <span class="cv_-_computer_voice">IArchivedEntity</span> objects of the given type in the XML document.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LP_-_List_Para"><span class="cv_-_computer_voice"><a name="2022859">IArchivedEntitySet</a></span> provides the following key methods:</div>
      <div class="BI2_-_Bullet_Item_002c_Level_2_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner"><span class="cv_-_computer_voice"><a name="2022860">rename(</a></span><span class="ps_-_parameter_in_code_snippets">newEntityName</span><span class="cv_-_computer_voice"> : String)</span> – renames all rows in the set to the new name.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI2_-_Bullet_Item_002c_Level_2_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner"><span class="cv_-_computer_voice"><a name="2022861">delete()</a></span> – deletes all rows in the set.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI2_-_Bullet_Item_002c_Level_2_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner"><span class="cv_-_computer_voice"><a name="2022862">search(</a></span><span class="ps_-_parameter_in_code_snippets">predicate</span><span class="cv_-_computer_voice"> : Predicate&lt;IArchivedEntity&gt;)</span> – returns a <span class="cv_-_computer_voice">List</span> of <span class="cv_-_computer_voice">IArchivedEntity</span> objects that match the given predicate.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI2_-_Bullet_Item_002c_Level_2_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner"><span class="cv_-_computer_voice"><a name="2022863">create(</a></span><span class="ps_-_parameter_in_code_snippets">referenceInfo</span><span class="cv_-_computer_voice"> : String, </span><span class="ps_-_parameter_in_code_snippets">properties</span><span class="cv_-_computer_voice"> : List&lt;Pair&lt;String, Object&gt;&gt;)</span> – returns a new <span class="cv_-_computer_voice">IArchivedEntity</span> with the given properties. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LP_-_List_Para"><span class="cv_-_computer_voice"><a name="2022864">IArchivedEntity</a></span> provides the following key methods:</div>
      <div class="BI2_-_Bullet_Item_002c_Level_2_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner"><span class="cv_-_computer_voice"><a name="2022865">delete()</a></span> – deletes just this row.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI2_-_Bullet_Item_002c_Level_2_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner"><span class="cv_-_computer_voice"><a name="2022866">getPropertyValue(</a></span><span class="ps_-_parameter_in_code_snippets">propertyName</span> : String<span class="cv_-_computer_voice">)</span> – returns the value of the property of the given name. If the property value is a reference to another entity, this method returns an <span class="cv_-_computer_voice">IArchivedEntity</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI2_-_Bullet_Item_002c_Level_2_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner"><span class="cv_-_computer_voice"><a name="2022867">move(</a></span><span class="ps_-_parameter_in_code_snippets">newEntityName</span><span class="cv_-_computer_voice"> : String)</span> – moves this to a new entity type of the given name. The type is created if it did not exist. You must add any required properties to the type.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI2_-_Bullet_Item_002c_Level_2_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner"><span class="cv_-_computer_voice"><a name="2022868">updatePropertyValue(</a></span><span class="ps_-_parameter_in_code_snippets">propertyName</span><span class="cv_-_computer_voice"> : String, </span><span class="ps_-_parameter_in_code_snippets">newValue</span><span class="cv_-_computer_voice"> : String)</span> – updates the property of the given name to the given value.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="2022869">getArchivedTypekeySet(</a></span><span class="ps_-_parameter_in_code_snippets">typekeyName</span><span class="cv_-_computer_voice"> : String)</span> – returns an <span class="cv_-_computer_voice">IArchivedTypekeySet</span> object that contains all <span class="cv_-_computer_voice">IArchivedTypekey</span> objects in the given typelist.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="2022870">getArchivedTypekey(typelistName : String, code : String)</a></span> – Returns an <span class="cv_-_computer_voice">IArchivedTypekey</span> representing the typekey.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LP_-_List_Para"><span class="cv_-_computer_voice"><a name="2022871">IArchivedTypekey</a></span> provides the following key method:</div>
      <div class="BI2_-_Bullet_Item_002c_Level_2_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner"><span class="cv_-_computer_voice"><a name="2022872">delete()</a></span> – deletes the typekey from the XML. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2022873">More methods are available for </a><span class="cv_-_computer_voice">IArchivedEntitySet</span>, <span class="cv_-_computer_voice">IArchivedEntity</span> and <span class="cv_-_computer_voice">IArchivedTypekey</span>. See the Gosu documentation for a full listing. Generate the Gosu documentation by navigating to the PolicyCenter bin directory and entering the following command:</div>
      <div class="CS_-_Code_Single_Line"><a name="2022880">gwpc regen-gosudoc</a></div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="2022881">Incremental Upgrade</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2022888">When PolicyCenter archives an entity, it records the current data model version on the entity. PolicyCenter upgrades an archived entity as the entity is restored. The upgrader executes the necessary archive upgrade triggers incrementally on each archived XML entity, according to the data model version of the archived entity. </a></div>
      <div class="B_-_Body"><a name="2022889">An entity archived at one version might not be restored and upgraded until several intermediate data model upgrades have been performed. Therefore, do not delete your custom upgrade triggers.</a></div>
      <div class="B_-_Body"><a name="2022890">Consider the following situation. Note that this example is for demonstration purposes only. The version numbers included do not represent actual PolicyCenter versions but are included to explain the incremental upgrade process. Each ’+’ after a version number indicates a custom data model change.</a></div>
      <div class="B_-_Body" style="color: #000000; font-style: normal; font-variant: normal; font-weight: bold; margin-bottom: 2.0pt; margin-top: 5.0pt; text-transform: none; vertical-align: baseline"><span class="ri_-_run_in_header"><a name="2022894">Guidewire data model changes</a></span></div>
      <div class="B_-_Body"><a name="2022895">v6.0.0 – Entity does not have column X.</a></div>
      <div class="B_-_Body"><a name="2022896">v6.0.1 – Guidewire adds column X to the entity with a default value of 100.</a></div>
      <div class="B_-_Body"><a name="2022897">v6.0.2 – Guidewire updates the default value of column X to 200.</a></div>
      <div class="B_-_Body" style="color: #000000; font-style: normal; font-variant: normal; font-weight: bold; margin-bottom: 2.0pt; margin-top: 5.0pt; text-transform: none; vertical-align: baseline"><span class="ri_-_run_in_header"><a name="2022898">Implementation #1 upgrade path</a></span></div>
      <div class="B_-_Body"><a name="2022899">v6.0.0+ – Start with version 6.0.0 data model with custom changes.</a></div>
      <div class="B_-_Body"><a name="2022900">v6.0.0++ – More custom data model changes.</a></div>
      <div class="B_-_Body"><a name="2022901">v6.0.0+++ – More custom data model changes.</a></div>
      <div class="B_-_Body"><a name="2022902">v6.0.2+ – column X introduced with a default value of 200. </a></div>
      <div class="B_-_Body"><a name="2022903">Result of upgrade of an entity archived at v6.0.0+: column X has value 200.</a></div>
      <div class="B_-_Body"><a name="2022904">In this situation, version 6.0.1 was skipped in the upgrade path. Therefore, column X is added with the default value of 200 that it has in version 6.0.2.</a></div>
      <div class="B_-_Body" style="color: #000000; font-style: normal; font-variant: normal; font-weight: bold; margin-bottom: 2.0pt; margin-top: 5.0pt; text-transform: none; vertical-align: baseline"><span class="ri_-_run_in_header"><a name="2022905">Implementation #2 upgrade path</a></span></div>
      <div class="B_-_Body"><a name="2022906">v6.0.0+ – Start with version 6.0.0 data model with custom changes.</a></div>
      <div class="B_-_Body"><a name="2022907">v6.0.0++ – More custom data model changes.</a></div>
      <div class="B_-_Body"><a name="2022908">v6.0.1+ – column X introduced with a default value of 100.</a></div>
      <div class="B_-_Body"><a name="2022909">v6.0.2+ – column X already exists.</a></div>
      <div class="B_-_Body"><a name="2022910">Result of upgrade of an entity archived at v6.0.0+: column X has value 100.</a></div>
      <div class="B_-_Body"><a name="2022911">In this situation, column X is added in version 6.0.1 with the default value of 100. During the upgrade from version 6.0.1 to version 6.0.2, column X already exists. Therefore, the upgrader does not add the column. A custom trigger would be required to update the value of X from 100 to 200 during the upgrade from version 6.0.1 to 6.0.2.</a></div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>